{"name":"Learn fmdb","tagline":"","body":"# learn-fmdb\r\n- PART 1 - Hello fmdb\r\n- PART 2 - Coming soon...\r\n\r\n## 安裝\r\n1. <a href=\"https://github.com/ccgus/fmdb\" target=\"_blank\">下載FMDB</a>\r\n2. 將`fmdb/src/fmdb`資料夾拖進專案\r\n3. 連結sqlite3.dylib <a href=\"https://raw.githubusercontent.com/iampaul83/learn-fmdb/master/imgs-for-md/img1.png\" target=\"_blank\">圖解</a>\r\n4. `#import \"FMDatabase.h\"`\r\n\r\n## Hello fmdb\r\n##### ViewController.m\r\n###### 初始化FMDatabase物件\r\n```Objective-C\r\n// 若該路徑檔案不存在將會自動建立新檔\r\nFMDatabase *db = [FMDatabase databaseWithPath:self.dbPath];\r\n```\r\n###### 開啟檔案\r\n```Objective-C\r\n// 開始使用db前必須先開啟\r\nBOOL dbOpenSuccess = [db open];\r\nif ( !dbOpenSuccess ) {\r\n  NSLog(@\"無法開啟db\");\r\n  return;\r\n}\r\n```\r\n###### Create Table\r\n```Objective-C\r\n[db executeUpdate:@\"create table hello (col1 text, col2 integer)\"];\r\n```\r\n###### Insert into\r\n```Objective-C\r\n// 數字型態的欄位以NSNumber物件傳入\r\n[db executeUpdate:@\"insert into hello (col1, col2) values (?, ?)\", @\"hihi\", @123];\r\n```\r\n###### Query\r\n```Objective-C\r\nFMResultSet *queryResult = [db executeQuery:@\"select * from hello\"];\r\n```\r\n###### Fetch result\r\n* 一些可以取得資料的方法\r\n* 請愛用Subscript(`queryResult[@\"col1\"]`) ->\r\n  * <a href=\"http://ccgus.github.io/fmdb/html/Classes/FMResultSet.html#//api/name/objectAtIndexedSubscript:\" target=\"_blank\">FMResultSet.objectAtIndexedSubscript:</a>\r\n  * <a href=\"http://ccgus.github.io/fmdb/html/Classes/FMResultSet.html#//api/name/objectForKeyedSubscript:\" target=\"_blank\">FMResultSet.objectForKeyedSubscript:</a>\r\n\r\n```Objective-C\r\nwhile ( [queryResult next] ) {\r\n  NSString *col1 = [queryResult stringForColumn:@\"col1\"];\r\n            col1 = [queryResult objectForColumnName:@\"col1\"];\r\n            col1 = queryResult[@\"col1\"];\r\n  \r\n  int col2_int = [queryResult intForColumn:@\"col2\"];\r\n  NSNumber *col2_NSNumber = [queryResult objectForColumnName:@\"col2\"];\r\n            col2_NSNumber = queryResult[@\"col2\"];\r\n}\r\n```\r\n###### 關於上面的` while `與` [queryResult next] `\r\n1. ` [queryResult next] -> YES `：還有資料 -> **3**\r\n2. ` [queryResult next] -> NO `：沒資料了 -> **結束while**\r\n3. 在queryResult目前指向的row收資料\r\n4. **↻ 1**\r\n###### Close db\r\n\r\n## 練習\r\n1. 建立db\r\n2. 建立table\r\n3. 用TableView實作新增、修改、刪除\r\n\r\n***\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}